{"version":3,"file":"marionette-dropdown","sources":["marionette-dropdown/src/cocktail.js","marionette-dropdown/src/views/item.js","marionette-dropdown/src/templates.js","marionette-dropdown/src/loading.js","marionette-dropdown/src/utils.js","marionette-dropdown/src/mixins/dropdown.js","marionette-dropdown/src/views/dropdown.js","marionette-dropdown/src/index.js"],"sourcesContent":["\nimport _ from 'lodash'\n\nimport Backbone from 'backbone'\nimport Marionette from 'marionette'\nimport Cocktail from 'cocktail'\n\nlet originalExtend = Backbone.Model.extend\n\nlet extend = function (protoProps, classProps) {\n  let klass = originalExtend.call(this, protoProps, classProps)\n  let mixins = klass.prototype.mixins\n  if (mixins && klass.prototype.hasOwnProperty('mixins')) {\n    Cocktail.mixin(klass, mixins)\n  }\n  return klass\n}\n\n_.each([\n  Backbone.Model,\n  Backbone.Collection,\n  Backbone.Router,\n  Backbone.View,\n  Marionette.ItemView,\n  Marionette.CollectionView,\n  Marionette.CompositeView,\n  Marionette.LayoutView\n], function (klass) {\n  klass.mixin = function mixin () {\n    Cocktail.mixin(this, _.toArray(arguments))\n  }\n  klass.extend = extend\n})\n","\nimport Marionette from 'marionette'\n\nexport default Marionette.ItemView.extend({\n  tagName: 'li',\n  template: (data) => data.text,\n  events: {\n    mouseover: 'onMouseOver'\n  },\n  triggers: {\n    click: 'select'\n  },\n  onMouseOver: function () {\n    this.trigger('focus')\n  },\n  attributes: function () {\n    return {'data-value': this.model.id}\n  }\n})\n","import handlebars from 'handlebars'\n\nexport default {\n'dropdown': handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \" name=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : {},{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"dropdown-button\\\">\\n  <div class=\\\"button-text\\\"></div>\\n  <i class=\\\"icons expand\\\">expand_more</i>\\n</div>\\n<input type=\\\"hidden\\\"\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.name : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \" />\\n\";\n},\"useData\":true}),\n'spinner': handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"spinner\\\" width=\\\"65px\\\" height=\\\"65px\\\" viewBox=\\\"0 0 66 66\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <circle class=\\\"spinner-path\\\" fill=\\\"none\\\" stroke-width=\\\"6\\\" stroke-linecap=\\\"round\\\" cx=\\\"33\\\" cy=\\\"33\\\" r=\\\"30\\\"></circle>\\n</svg>\\n\";\n},\"useData\":true}),\n}\n","\nimport $ from 'jquery'\n\nimport templates from './templates'\n\nconst spinnerHtml = templates['spinner']({})\n\nfunction add (el) {\n  let loadingEl = $('<div class=\"loading\"></div>')\n  loadingEl.append(spinnerHtml)\n  el.append(loadingEl)\n}\n\nfunction remove (el) {\n  el.children('.loading').remove()\n}\n\nfunction loading (el, on) {\n  if (on) {\n    add(el)\n  } else {\n    remove(el)\n  }\n}\n\nexport default loading\n","\nimport _ from 'lodash'\n\nimport loading from './loading'\n\nfunction defined () {\n  return _.find(arguments, function (o) {\n    return (o !== undefined)\n  })\n}\n\nfunction transfer (sender, receiver, eventName) {\n  sender.listenTo(sender, eventName, function () {\n    let args = _([eventName]).concat(arguments).value()\n    receiver.trigger.apply(receiver, args)\n  })\n}\n\nfunction transferAll (sender, receiver, originName) {\n  sender.listenTo(sender, 'all', function (eventName) {\n    let args = _([`${originName}:${eventName}`]).concat(arguments).value()\n    receiver.trigger.apply(receiver, args)\n  })\n}\n\nfunction loadingEvents (receiver, sender) {\n  transfer(sender, receiver, 'loading')\n  transfer(sender, receiver, 'loaded')\n}\n\nfunction loadingActions (view) {\n  view.listenTo(view, 'loading', () => { loading(view.$el, true) })\n  view.listenTo(view, 'loaded', () => { loading(view.$el, false) })\n}\n\nexport default {\n  defined,\n  loadingActions,\n  loadingEvents,\n  transferAll\n}\n","\nimport $ from 'jquery'\nimport _ from 'lodash'\n\nimport animation from 'animation'\n\nimport utils from '../utils'\n\nexport default {\n  events: {\n    keydown: 'onKeyDown'\n  },\n  initialize: function (options) {\n    this.placeholder = this.placeholder || options.placeholder\n    this.allowEmpty = this.allowEmpty || options.allowEmpty\n    this.expanded = false\n    this.showing = false\n    this.hiding = false\n    this.name = options.name\n    this.parent = options.parent\n    if (this.getCollection) {\n      this.collection = this.getCollection()\n    } else {\n      this.collection = options.collection\n    }\n    this.hideListFunc = _.bind(this.hideList, this, null)\n  },\n  onRender: function () {\n    if (this.expanded) { this.list.$el.css({opacity: 1}) }\n    this.scrollParent = this.$el.closest('.nano-content')\n  },\n  onParentScroll: function (e) {\n    this.positionList()\n  },\n  onDestroy: function () {\n    $(window).off('click', this.hideListFunc)\n    this.scrollParent.off('scroll', this.hideListFunc)\n    this.scrollParent.off('scroll', this.onParentScrollFunc)\n    if (this.list) this.list.destroy()\n  },\n  onKeyDown: function (e) {\n    if (this.list && this.list.onKeyDown) this.list.onKeyDown(e)\n  },\n  onAttach: function () {\n    // Create the list view\n    this.list = new this.focusListView({\n      childView: this.dropdownItemView,\n      collection: this.collection,\n      scroll: this.options.scroll\n    })\n    // Attach to list events\n    this.listenTo(this.list, 'render:collection', this.onListCollectionRender)\n    utils.transferAll(this.list, this, 'list')\n    // Render the list before showing\n    this.list.render()\n    // Set the list width if specified\n    if (this.options.listHeight) {\n      this.list.$el.css('height', this.options.listHeight)\n    }\n    // Make list invisible\n    animation.visible(this.list.$el, false)\n    // Reset the list width\n    this.resetListWidth()\n    // Move the list element to the indicated overlay\n    this.getOverlay().append(this.list.$el)\n    // Refresh the list scrolling\n    if (this.options.scroll) this.list.refreshScroll()\n  },\n  onListCollectionRender: function () {\n    if (this.options.scroll) this.list.refreshScroll()\n  },\n  resetListWidth: function () {\n    if (this.options.scroll) {\n      let width = this.options.listWidth || this.$el.outerWidth()\n      this.list.$el.outerWidth(width)\n    }\n  },\n  serializeData: function () {\n    return {\n      name: this.name,\n      placeholder: this.placeholder\n    }\n  },\n  toggleList: function () {\n    if (this.expanded) {\n      this.hideList()\n    } else {\n      this.showList()\n    }\n  },\n  positionList: function () {\n    let listEl = this.list.$el\n    let windowHeight = $(window).height()\n    let windowWidth = $(window).width()\n    let elOffset = this.$el.offset()\n    let elHeight = this.$el.outerHeight()\n    let elWidth = this.$el.outerWidth()\n    let listWidth = this.list.$el.outerWidth()\n    let listHeight = 500\n    // let listHeight = this.list.$el.outerHeight()\n    let potentialTop = elOffset.top - listHeight\n    let potentialBottom = elOffset.top + elHeight + listHeight\n    let potentialRight = elOffset.left + listWidth\n    let expandedToLeft = (potentialRight > windowWidth)\n    let expandedToTop = (potentialBottom > windowHeight) && (potentialTop > 0)\n    if (expandedToTop) {\n      listEl.css({top: '', bottom: (windowHeight - (elOffset.top + elHeight))})\n    } else {\n      listEl.css({top: elOffset.top, bottom: ''})\n    }\n    if (expandedToLeft) {\n      listEl.css({right: (windowWidth - (elOffset.left + elWidth))})\n    } else {\n      listEl.css({left: elOffset.left})\n    }\n  },\n  showList: function () {\n    if (!this.showing && !this.hiding &&\n      (!this.collection.isEmpty() || this.allowEmpty)) {\n      // Add the class indicating open status\n      this.$el.addClass('open')\n      // Raise the element to maintain visiblity\n      this.$el.css('z-index', 2)\n      // Attach to the list close event\n      this.list.listenTo(this.list, 'close', this.hideList.bind(this))\n      // Prevent list from automatically rendering on collection reset\n      this.list.stopListening(this.collection, 'reset')\n      // Get the list element\n      let listEl = this.list.$el\n      // Position the list before animation\n      this.positionList()\n      // Trigger the dropdown show event\n      this.trigger('dropdown:show')\n      // Attach to event for hiding and scrolling the list on scroll\n      this.onParentScrollFunc = this.onParentScroll.bind(this)\n      this.scrollParent.on('scroll', this.onParentScrollFunc)\n      // Expand and show the list\n      this.showing = true\n      return animation.show(listEl).then(() => {\n        this.showing = false\n        this.expanded = true\n        // Listen to select events\n        this.listenTo(this.list, 'select', this.onItemSelect)\n        // Trigger freeze on parent if available\n        if (this.parent) { this.parent.trigger('freeze') }\n        // Attach to event for hiding the list on click (skip current)\n        _.defer(() => {\n          $(window).one('click', this.hideListFunc)\n          this.scrollParent.one('scroll', this.hideListFunc)\n        })\n      })\n    } else {\n      return Promise.resolve()\n    }\n  },\n  hideList: function () {\n    if ((!this.hiding && this.expanded) || this.showing) {\n      // Remove the class indicating open status\n      this.$el.removeClass('open')\n      // Remove the item select handler after potential handling\n      _.defer(() => this.stopListening(this.list, 'select', this.onItemSelect))\n      // Shrink and hide the element\n      this.hiding = true\n      return animation.hide(this.list.$el).then(() => {\n        this.hiding = false\n        this.expanded = false\n        // Return the element to it's original level\n        this.$el.css('z-index', '')\n        // Detach the hide from the window click\n        $(window).off('click', this.hideListFunc)\n        // Detach the hide from the scroll\n        this.scrollParent.off('scroll', this.onParentScrollFunc)\n        this.scrollParent.off('scroll', this.hideListFunc)\n        // Trigger the hidden event\n        this.trigger('hidden')\n        // Trigger freeze on parent if available\n        if (this.parent) { this.parent.trigger('thaw') }\n      })\n    } else {\n      return Promise.resolve()\n    }\n  }\n}\n","\nimport $ from 'jquery'\nimport _ from 'lodash'\n\nimport Marionette from 'marionette'\nimport {FocusListView} from 'focuslist'\n\nimport ItemView from './item'\nimport DropdownMixin from '../mixins/dropdown'\n\nimport utils from '../utils'\nimport templates from '../templates'\n\nconst DropdownFocusListView = FocusListView.extend({\n  attributes: {class: 'dropdownList focusList'}\n})\n\nexport default Marionette.LayoutView.extend({\n  mixins: [DropdownMixin],\n  template: templates['dropdown'],\n  focusListView: DropdownFocusListView,\n  dropdownItemView: ItemView,\n  attributes: {\n    class: 'dropdown'\n  },\n  ui: {\n    button: '.dropdown-button',\n    text: '.button-text',\n    input: 'input'\n  },\n  events: {\n    'change @ui.input': 'onInputChange',\n    'click @ui.button': 'onButtonClick',\n    'focus @ui.button': 'onButtonFocus',\n    'blur @ui.button': 'onButtonBlur'\n  },\n  initialize: function (options) {\n    this.listenTo(this, 'dropdown:show', this.onDropdownShow)\n    utils.loadingEvents(this, this.collection)\n    utils.loadingActions(this, true)\n  },\n  onDropdownShow: function () {\n    // Indicate currently selected item with focus\n    if (this.selected) {\n      let child = this.list.findByModel(this.selected)\n      if (child) { child.$el.addClass('focus') }\n    }\n  },\n  onAttach: function () {\n    this.listenTo(this.collection, 'reset', this.determineState)\n    this.determineState()\n  },\n  onInputChange: function () {\n    let value = this.ui.input.val()\n    this.selectId(value)\n  },\n  onButtonClick: function (e) {\n    e.preventDefault()\n    if (!this.expanded) {\n      _.defer(this.showList.bind(this))\n    } else {\n      _.defer(this.hideList.bind(this))\n      this.ui.button.blur()\n    }\n  },\n  onButtonFocus: function (e) {\n    e.stopPropagation()\n    e.preventDefault()\n    if (!this.expanded) {\n      _.defer(this.showList.bind(this))\n    }\n  },\n  onButtonBlur: function (e) {\n    if (this.expanded) {\n      let focusedView = this.list.findFocusedItem()\n      if (focusedView !== undefined) {\n        this.list.trigger('select', focusedView)\n      }\n    } else {\n      this.hideList()\n    }\n  },\n  onItemSelect: function (child) {\n    this.select(child.model, true)\n    this.hideList()\n  },\n  getOverlay: function () {\n    return $('body')\n  },\n  getFirst: function () {\n    let visible = this.collection.filter(function (o) {\n      return !(o.get('visible') === false)\n    })\n    return _.first(visible)\n  },\n  getSelected: function () {\n    return this.selected\n  },\n  determineState: function () {\n    if (this.allowEmpty === true || this.collection.size() > 0) {\n      this.disabled = false\n    } else if (this.collection.size() === 0) {\n      this.disabled = true\n    }\n    if (this.disabled) {\n      this.$el.addClass('disabled')\n      this.ui.button.attr('tabindex', -1)\n      this.select(null, true)\n    } else {\n      this.$el.removeClass('disabled')\n      if (this.ui.button.attr) this.ui.button.attr('tabindex', 0)\n      if (this.selectedId) {\n        this.select(this.collection.get(this.selectedId), true)\n        this.selectedId = null\n      } else {\n        let id = this.ui.input.val() || (this.selected && this.selected.id)\n        this.select(this.collection.get(id) || this.getFirst(), true)\n      }\n    }\n  },\n  select: function (model, trigger) {\n    let changed = !(this.selected === model)\n    this.selected = model\n    if (this.isRendered) {\n      if (this.selected) {\n        this.ui.text.html(this.selected.get('text'))\n        this.ui.input.val(this.selected.id)\n      } else {\n        this.ui.text.html('---')\n        this.ui.input.val('')\n      }\n      if (trigger) { this.ui.input.trigger('change') }\n    }\n    if (changed) { this.trigger('select', this.selected) }\n  },\n  selectId: function (id, trigger) {\n    if (id === undefined || id === null || _.size(id) === 0) {\n      this.select(this.getFirst(), trigger)\n    } else {\n      let item = this.collection.get(id)\n      if (!item) {\n        this.selectedId = id\n      } else {\n        this.select(this.collection.get(id), trigger)\n      }\n    }\n  },\n  setVisibleOptions: function (visible) {\n    // Set the visibility of each model in the collection\n    this.collection.each(function (model) {\n      model.set('visible', _.includes(visible, model.id), {silent: true})\n    })\n    // Trigger a change event on the collection\n    this.collection.trigger('change')\n    // Determine if the selection should be changed\n    if (this.selected) {\n      if (this.selected.get('visible') === false) {\n        this.select(this.getFirst())\n      }\n    }\n  }\n})\n","\nimport './cocktail'\n\nimport DropdownView from './views/dropdown'\nimport DropdownItemView from './views/item'\nimport DropdownMixin from './mixins/dropdown'\n\nexport default {\n  DropdownView,\n  DropdownItemView,\n  DropdownMixin\n}\n"],"names":["originalExtend","Backbone","Model","extend","protoProps","classProps","klass","call","mixins","prototype","hasOwnProperty","Cocktail","mixin","_","each","Collection","Router","View","Marionette","ItemView","CollectionView","CompositeView","LayoutView","toArray","arguments","tagName","template","data","text","events","mouseover","triggers","click","onMouseOver","trigger","attributes","model","id","handlebars","container","depth0","helpers","partials","helper","escapeExpression","name","helperMissing","stack1","program","noop","spinnerHtml","templates","add","el","loadingEl","$","append","remove","children","loading","on","defined","find","o","undefined","transfer","sender","receiver","eventName","listenTo","args","concat","value","apply","transferAll","originName","loadingEvents","loadingActions","view","$el","keydown","initialize","options","placeholder","allowEmpty","expanded","showing","hiding","parent","getCollection","collection","hideListFunc","bind","hideList","onRender","list","css","opacity","scrollParent","closest","onParentScroll","e","positionList","onDestroy","window","off","onParentScrollFunc","destroy","onKeyDown","onAttach","focusListView","childView","dropdownItemView","scroll","onListCollectionRender","utils","render","listHeight","animation","visible","resetListWidth","getOverlay","refreshScroll","width","listWidth","outerWidth","serializeData","toggleList","showList","listEl","windowHeight","height","windowWidth","elOffset","offset","elHeight","outerHeight","elWidth","potentialTop","top","potentialBottom","potentialRight","left","expandedToLeft","expandedToTop","bottom","right","isEmpty","addClass","stopListening","show","then","onItemSelect","defer","one","Promise","resolve","removeClass","hide","DropdownFocusListView","FocusListView","class","DropdownMixin","ui","button","input","onDropdownShow","selected","child","findByModel","determineState","onInputChange","val","selectId","onButtonClick","preventDefault","blur","onButtonFocus","stopPropagation","onButtonBlur","focusedView","findFocusedItem","select","getFirst","filter","get","first","getSelected","size","disabled","attr","selectedId","changed","isRendered","html","item","setVisibleOptions","set","includes","silent","DropdownView","DropdownItemView"],"mappings":";;;;;;;;;;;;;;IAOA,IAAIA,iBAAiBC,SAASC,KAAT,CAAeC,MAApC;;AAEA,IAAA,IAAIA,SAAS,SAATA,MAAS,CAAUC,UAAV,EAAsBC,UAAtB,EAAkC;AAC7C,IAAA,MAAIC,QAAQN,eAAeO,IAAf,CAAoB,IAApB,EAA0BH,UAA1B,EAAsCC,UAAtC,CAAZ;AACA,IAAA,MAAIG,SAASF,MAAMG,SAAN,CAAgBD,MAA7B;AACA,IAAA,MAAIA,UAAUF,MAAMG,SAAN,CAAgBC,cAAhB,CAA+B,QAA/B,CAAd,EAAwD;AACtDC,IAAAA,aAASC,KAAT,CAAeN,KAAf,EAAsBE,MAAtB;AACD,IAAA;AACD,IAAA,SAAOF,KAAP;AACD,IAAA,CAPD;;AASAO,IAAAA,EAAEC,IAAF,CAAO,CACLb,SAASC,KADJ,EAELD,SAASc,UAFJ,EAGLd,SAASe,MAHJ,EAILf,SAASgB,IAJJ,EAKLC,WAAWC,QALN,EAMLD,WAAWE,cANN,EAOLF,WAAWG,aAPN,EAQLH,WAAWI,UARN,CAAP,EASG,UAAUhB,KAAV,EAAiB;AAClBA,IAAAA,QAAMM,KAAN,GAAc,SAASA,KAAT,GAAkB;AAC9BD,IAAAA,aAASC,KAAT,CAAe,IAAf,EAAqBC,EAAEU,OAAF,CAAUC,SAAV,CAArB;AACD,IAAA,GAFD;AAGAlB,IAAAA,QAAMH,MAAN,GAAeA,MAAf;AACD,IAAA,CAdD;;mBCfee,WAAWC,QAAX,CAAoBhB,MAApB,CAA2B;AACxCsB,IAAAA,WAAS,IAD+B;AAExCC,IAAAA,YAAU,kBAACC,IAAD;AAAA,IAAA,WAAUA,KAAKC,IAAf;AAAA,IAAA,GAF8B;AAGxCC,IAAAA,UAAQ;AACNC,IAAAA,eAAW;AADL,IAAA,GAHgC;AAMxCC,IAAAA,YAAU;AACRC,IAAAA,WAAO;AADC,IAAA,GAN8B;AASxCC,IAAAA,eAAa,uBAAY;AACvB,IAAA,SAAKC,OAAL,CAAa,OAAb;AACD,IAAA,GAXuC;AAYxCC,IAAAA,cAAY,sBAAY;AACtB,IAAA,WAAO,EAAC,cAAc,KAAKC,KAAL,CAAWC,EAA1B,EAAP;AACD,IAAA;AAduC,IAAA,CAA3B,CAAf;;oBCDe;AACf,IAAA,gBAAYC,WAAWZ,QAAX,CAAoB,EAAC,KAAI,WAASa,SAAT,EAAmBC,MAAnB,EAA0BC,OAA1B,EAAkCC,QAAlC,EAA2Cf,IAA3C,EAAiD;AAClF,IAAA,gBAAIgB,MAAJ;;AAEF,IAAA,mBAAO,aACHJ,UAAUK,gBAAV,EAA6BD,SAAS,CAACA,SAASF,QAAQI,IAAR,KAAiBL,UAAU,IAAV,GAAiBA,OAAOK,IAAxB,GAA+BL,MAAhD,CAAV,KAAsE,IAAtE,GAA6EG,MAA7E,GAAsFF,QAAQK,aAAxG,EAAwH,OAAOH,MAAP,KAAkB,UAAlB,GAA+BA,OAAOpC,IAAP,CAAYiC,UAAU,IAAV,GAAiBA,MAAjB,GAA0B,EAAtC,EAAyC,EAAC,QAAO,MAAR,EAAe,QAAO,EAAtB,EAAyB,QAAOb,IAAhC,EAAzC,CAA/B,GAAiHgB,MAArQ,EADG,GAEH,IAFJ;AAGD,IAAA,SAN+B,EAM9B,YAAW,CAAC,CAAD,EAAG,UAAH,CANmB,EAMJ,QAAO,cAASJ,SAAT,EAAmBC,MAAnB,EAA0BC,OAA1B,EAAkCC,QAAlC,EAA2Cf,IAA3C,EAAiD;AAChF,IAAA,gBAAIoB,MAAJ;;AAEF,IAAA,mBAAO,uJACF,CAACA,SAASN,QAAQ,IAAR,EAAclC,IAAd,CAAmBiC,UAAU,IAAV,GAAiBA,MAAjB,GAA0B,EAA7C,EAAiDA,UAAU,IAAV,GAAiBA,OAAOK,IAAxB,GAA+BL,MAAhF,EAAwF,EAAC,QAAO,IAAR,EAAa,QAAO,EAApB,EAAuB,MAAKD,UAAUS,OAAV,CAAkB,CAAlB,EAAqBrB,IAArB,EAA2B,CAA3B,CAA5B,EAA0D,WAAUY,UAAUU,IAA9E,EAAmF,QAAOtB,IAA1F,EAAxF,CAAV,KAAuM,IAAvM,GAA8MoB,MAA9M,GAAuN,EADrN,IAEH,OAFJ;AAGD,IAAA,SAZ+B,EAY9B,WAAU,IAZoB,EAApB,CADG;AAcf,IAAA,eAAWT,WAAWZ,QAAX,CAAoB,EAAC,YAAW,CAAC,CAAD,EAAG,UAAH,CAAZ,EAA2B,QAAO,cAASa,SAAT,EAAmBC,MAAnB,EAA0BC,OAA1B,EAAkCC,QAAlC,EAA2Cf,IAA3C,EAAiD;AAC9G,IAAA,mBAAO,gQAAP;AACH,IAAA,SAF8B,EAE7B,WAAU,IAFmB,EAApB;AAdI,IAAA,CAAf;;ICGA,IAAMuB,cAAcC,UAAU,SAAV,EAAqB,EAArB,CAApB;;AAEA,IAAA,SAASC,GAAT,CAAcC,EAAd,EAAkB;AAChB,IAAA,MAAIC,YAAYC,EAAE,6BAAF,CAAhB;AACAD,IAAAA,YAAUE,MAAV,CAAiBN,WAAjB;AACAG,IAAAA,KAAGG,MAAH,CAAUF,SAAV;AACD,IAAA;;AAED,IAAA,SAASG,MAAT,CAAiBJ,EAAjB,EAAqB;AACnBA,IAAAA,KAAGK,QAAH,CAAY,UAAZ,EAAwBD,MAAxB;AACD,IAAA;;AAED,IAAA,SAASE,OAAT,CAAkBN,EAAlB,EAAsBO,EAAtB,EAA0B;AACxB,IAAA,MAAIA,EAAJ,EAAQ;AACNR,IAAAA,QAAIC,EAAJ;AACD,IAAA,GAFD,MAEO;AACLI,IAAAA,WAAOJ,EAAP;AACD,IAAA;AACF,IAAA;;IClBD,SAASQ,OAAT,GAAoB;AAClB,IAAA,SAAOhD,EAAEiD,IAAF,CAAOtC,SAAP,EAAkB,UAAUuC,CAAV,EAAa;AACpC,IAAA,WAAQA,MAAMC,SAAd;AACD,IAAA,GAFM,CAAP;AAGD,IAAA;;AAED,IAAA,SAASC,QAAT,CAAmBC,MAAnB,EAA2BC,QAA3B,EAAqCC,SAArC,EAAgD;AAC9CF,IAAAA,SAAOG,QAAP,CAAgBH,MAAhB,EAAwBE,SAAxB,EAAmC,YAAY;AAC7C,IAAA,QAAIE,OAAOzD,EAAE,CAACuD,SAAD,CAAF,EAAeG,MAAf,CAAsB/C,SAAtB,EAAiCgD,KAAjC,EAAX;AACAL,IAAAA,aAASjC,OAAT,CAAiBuC,KAAjB,CAAuBN,QAAvB,EAAiCG,IAAjC;AACD,IAAA,GAHD;AAID,IAAA;;AAED,IAAA,SAASI,WAAT,CAAsBR,MAAtB,EAA8BC,QAA9B,EAAwCQ,UAAxC,EAAoD;AAClDT,IAAAA,SAAOG,QAAP,CAAgBH,MAAhB,EAAwB,KAAxB,EAA+B,UAAUE,SAAV,EAAqB;AAClD,IAAA,QAAIE,OAAOzD,EAAE,CAAI8D,UAAJ,SAAkBP,SAAlB,CAAF,EAAkCG,MAAlC,CAAyC/C,SAAzC,EAAoDgD,KAApD,EAAX;AACAL,IAAAA,aAASjC,OAAT,CAAiBuC,KAAjB,CAAuBN,QAAvB,EAAiCG,IAAjC;AACD,IAAA,GAHD;AAID,IAAA;;AAED,IAAA,SAASM,aAAT,CAAwBT,QAAxB,EAAkCD,MAAlC,EAA0C;AACxCD,IAAAA,WAASC,MAAT,EAAiBC,QAAjB,EAA2B,SAA3B;AACAF,IAAAA,WAASC,MAAT,EAAiBC,QAAjB,EAA2B,QAA3B;AACD,IAAA;;AAED,IAAA,SAASU,cAAT,CAAyBC,IAAzB,EAA+B;AAC7BA,IAAAA,OAAKT,QAAL,CAAcS,IAAd,EAAoB,SAApB,EAA+B,YAAM;AAAEnB,IAAAA,YAAQmB,KAAKC,GAAb,EAAkB,IAAlB;AAAyB,IAAA,GAAhE;AACAD,IAAAA,OAAKT,QAAL,CAAcS,IAAd,EAAoB,QAApB,EAA8B,YAAM;AAAEnB,IAAAA,YAAQmB,KAAKC,GAAb,EAAkB,KAAlB;AAA0B,IAAA,GAAhE;AACD,IAAA;;AAED,gBAAe;AACblB,IAAAA,kBADa;AAEbgB,IAAAA,gCAFa;AAGbD,IAAAA,8BAHa;AAIbF,IAAAA;AAJa,IAAA,CAAf;;wBC3Be;AACb7C,IAAAA,UAAQ;AACNmD,IAAAA,aAAS;AADH,IAAA,GADK;AAIbC,IAAAA,cAAY,oBAAUC,OAAV,EAAmB;AAC7B,IAAA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,IAAoBD,QAAQC,WAA/C;AACA,IAAA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmBF,QAAQE,UAA7C;AACA,IAAA,SAAKC,QAAL,GAAgB,KAAhB;AACA,IAAA,SAAKC,OAAL,GAAe,KAAf;AACA,IAAA,SAAKC,MAAL,GAAc,KAAd;AACA,IAAA,SAAK1C,IAAL,GAAYqC,QAAQrC,IAApB;AACA,IAAA,SAAK2C,MAAL,GAAcN,QAAQM,MAAtB;AACA,IAAA,QAAI,KAAKC,aAAT,EAAwB;AACtB,IAAA,WAAKC,UAAL,GAAkB,KAAKD,aAAL,EAAlB;AACD,IAAA,KAFD,MAEO;AACL,IAAA,WAAKC,UAAL,GAAkBR,QAAQQ,UAA1B;AACD,IAAA;AACD,IAAA,SAAKC,YAAL,GAAoB9E,EAAE+E,IAAF,CAAO,KAAKC,QAAZ,EAAsB,IAAtB,EAA4B,IAA5B,CAApB;AACD,IAAA,GAlBY;AAmBbC,IAAAA,YAAU,oBAAY;AACpB,IAAA,QAAI,KAAKT,QAAT,EAAmB;AAAE,IAAA,WAAKU,IAAL,CAAUhB,GAAV,CAAciB,GAAd,CAAkB,EAACC,SAAS,CAAV,EAAlB;AAAiC,IAAA;AACtD,IAAA,SAAKC,YAAL,GAAoB,KAAKnB,GAAL,CAASoB,OAAT,CAAiB,eAAjB,CAApB;AACD,IAAA,GAtBY;AAuBbC,IAAAA,kBAAgB,wBAAUC,CAAV,EAAa;AAC3B,IAAA,SAAKC,YAAL;AACD,IAAA,GAzBY;AA0BbC,IAAAA,aAAW,qBAAY;AACrBhD,IAAAA,MAAEiD,MAAF,EAAUC,GAAV,CAAc,OAAd,EAAuB,KAAKd,YAA5B;AACA,IAAA,SAAKO,YAAL,CAAkBO,GAAlB,CAAsB,QAAtB,EAAgC,KAAKd,YAArC;AACA,IAAA,SAAKO,YAAL,CAAkBO,GAAlB,CAAsB,QAAtB,EAAgC,KAAKC,kBAArC;AACA,IAAA,QAAI,KAAKX,IAAT,EAAe,KAAKA,IAAL,CAAUY,OAAV;AAChB,IAAA,GA/BY;AAgCbC,IAAAA,aAAW,mBAAUP,CAAV,EAAa;AACtB,IAAA,QAAI,KAAKN,IAAL,IAAa,KAAKA,IAAL,CAAUa,SAA3B,EAAsC,KAAKb,IAAL,CAAUa,SAAV,CAAoBP,CAApB;AACvC,IAAA,GAlCY;AAmCbQ,IAAAA,YAAU,oBAAY;AACpB,IAAA;AACA,IAAA,SAAKd,IAAL,GAAY,IAAI,KAAKe,aAAT,CAAuB;AACjCC,IAAAA,iBAAW,KAAKC,gBADiB;AAEjCtB,IAAAA,kBAAY,KAAKA,UAFgB;AAGjCuB,IAAAA,cAAQ,KAAK/B,OAAL,CAAa+B;AAHY,IAAA,KAAvB,CAAZ;AAKA,IAAA;AACA,IAAA,SAAK5C,QAAL,CAAc,KAAK0B,IAAnB,EAAyB,mBAAzB,EAA8C,KAAKmB,sBAAnD;AACAC,IAAAA,UAAMzC,WAAN,CAAkB,KAAKqB,IAAvB,EAA6B,IAA7B,EAAmC,MAAnC;AACA,IAAA;AACA,IAAA,SAAKA,IAAL,CAAUqB,MAAV;AACA,IAAA;AACA,IAAA,QAAI,KAAKlC,OAAL,CAAamC,UAAjB,EAA6B;AAC3B,IAAA,WAAKtB,IAAL,CAAUhB,GAAV,CAAciB,GAAd,CAAkB,QAAlB,EAA4B,KAAKd,OAAL,CAAamC,UAAzC;AACD,IAAA;AACD,IAAA;AACAC,IAAAA,cAAUC,OAAV,CAAkB,KAAKxB,IAAL,CAAUhB,GAA5B,EAAiC,KAAjC;AACA,IAAA;AACA,IAAA,SAAKyC,cAAL;AACA,IAAA;AACA,IAAA,SAAKC,UAAL,GAAkBjE,MAAlB,CAAyB,KAAKuC,IAAL,CAAUhB,GAAnC;AACA,IAAA;AACA,IAAA,QAAI,KAAKG,OAAL,CAAa+B,MAAjB,EAAyB,KAAKlB,IAAL,CAAU2B,aAAV;AAC1B,IAAA,GA3DY;AA4DbR,IAAAA,0BAAwB,kCAAY;AAClC,IAAA,QAAI,KAAKhC,OAAL,CAAa+B,MAAjB,EAAyB,KAAKlB,IAAL,CAAU2B,aAAV;AAC1B,IAAA,GA9DY;AA+DbF,IAAAA,kBAAgB,0BAAY;AAC1B,IAAA,QAAI,KAAKtC,OAAL,CAAa+B,MAAjB,EAAyB;AACvB,IAAA,UAAIU,QAAQ,KAAKzC,OAAL,CAAa0C,SAAb,IAA0B,KAAK7C,GAAL,CAAS8C,UAAT,EAAtC;AACA,IAAA,WAAK9B,IAAL,CAAUhB,GAAV,CAAc8C,UAAd,CAAyBF,KAAzB;AACD,IAAA;AACF,IAAA,GApEY;AAqEbG,IAAAA,iBAAe,yBAAY;AACzB,IAAA,WAAO;AACLjF,IAAAA,YAAM,KAAKA,IADN;AAELsC,IAAAA,mBAAa,KAAKA;AAFb,IAAA,KAAP;AAID,IAAA,GA1EY;AA2Eb4C,IAAAA,cAAY,sBAAY;AACtB,IAAA,QAAI,KAAK1C,QAAT,EAAmB;AACjB,IAAA,WAAKQ,QAAL;AACD,IAAA,KAFD,MAEO;AACL,IAAA,WAAKmC,QAAL;AACD,IAAA;AACF,IAAA,GAjFY;AAkFb1B,IAAAA,gBAAc,wBAAY;AACxB,IAAA,QAAI2B,SAAS,KAAKlC,IAAL,CAAUhB,GAAvB;AACA,IAAA,QAAImD,eAAe3E,EAAEiD,MAAF,EAAU2B,MAAV,EAAnB;AACA,IAAA,QAAIC,cAAc7E,EAAEiD,MAAF,EAAUmB,KAAV,EAAlB;AACA,IAAA,QAAIU,WAAW,KAAKtD,GAAL,CAASuD,MAAT,EAAf;AACA,IAAA,QAAIC,WAAW,KAAKxD,GAAL,CAASyD,WAAT,EAAf;AACA,IAAA,QAAIC,UAAU,KAAK1D,GAAL,CAAS8C,UAAT,EAAd;AACA,IAAA,QAAID,YAAY,KAAK7B,IAAL,CAAUhB,GAAV,CAAc8C,UAAd,EAAhB;AACA,IAAA,QAAIR,aAAa,GAAjB;AACA,IAAA;AACA,IAAA,QAAIqB,eAAeL,SAASM,GAAT,GAAetB,UAAlC;AACA,IAAA,QAAIuB,kBAAkBP,SAASM,GAAT,GAAeJ,QAAf,GAA0BlB,UAAhD;AACA,IAAA,QAAIwB,iBAAiBR,SAASS,IAAT,GAAgBlB,SAArC;AACA,IAAA,QAAImB,iBAAkBF,iBAAiBT,WAAvC;AACA,IAAA,QAAIY,gBAAiBJ,kBAAkBV,YAAnB,IAAqCQ,eAAe,CAAxE;AACA,IAAA,QAAIM,aAAJ,EAAmB;AACjBf,IAAAA,aAAOjC,GAAP,CAAW,EAAC2C,KAAK,EAAN,EAAUM,QAASf,gBAAgBG,SAASM,GAAT,GAAeJ,QAA/B,CAAnB,EAAX;AACD,IAAA,KAFD,MAEO;AACLN,IAAAA,aAAOjC,GAAP,CAAW,EAAC2C,KAAKN,SAASM,GAAf,EAAoBM,QAAQ,EAA5B,EAAX;AACD,IAAA;AACD,IAAA,QAAIF,cAAJ,EAAoB;AAClBd,IAAAA,aAAOjC,GAAP,CAAW,EAACkD,OAAQd,eAAeC,SAASS,IAAT,GAAgBL,OAA/B,CAAT,EAAX;AACD,IAAA,KAFD,MAEO;AACLR,IAAAA,aAAOjC,GAAP,CAAW,EAAC8C,MAAMT,SAASS,IAAhB,EAAX;AACD,IAAA;AACF,IAAA,GA3GY;AA4Gbd,IAAAA,YAAU,oBAAY;AAAA,IAAA;;AACpB,IAAA,QAAI,CAAC,KAAK1C,OAAN,IAAiB,CAAC,KAAKC,MAAvB,KACD,CAAC,KAAKG,UAAL,CAAgByD,OAAhB,EAAD,IAA8B,KAAK/D,UADlC,CAAJ,EACmD;AACjD,IAAA;AACA,IAAA,WAAKL,GAAL,CAASqE,QAAT,CAAkB,MAAlB;AACA,IAAA;AACA,IAAA,WAAKrE,GAAL,CAASiB,GAAT,CAAa,SAAb,EAAwB,CAAxB;AACA,IAAA;AACA,IAAA,WAAKD,IAAL,CAAU1B,QAAV,CAAmB,KAAK0B,IAAxB,EAA8B,OAA9B,EAAuC,KAAKF,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAvC;AACA,IAAA;AACA,IAAA,WAAKG,IAAL,CAAUsD,aAAV,CAAwB,KAAK3D,UAA7B,EAAyC,OAAzC;AACA,IAAA;AACA,IAAA,UAAIuC,SAAS,KAAKlC,IAAL,CAAUhB,GAAvB;AACA,IAAA;AACA,IAAA,WAAKuB,YAAL;AACA,IAAA;AACA,IAAA,WAAKpE,OAAL,CAAa,eAAb;AACA,IAAA;AACA,IAAA,WAAKwE,kBAAL,GAA0B,KAAKN,cAAL,CAAoBR,IAApB,CAAyB,IAAzB,CAA1B;AACA,IAAA,WAAKM,YAAL,CAAkBtC,EAAlB,CAAqB,QAArB,EAA+B,KAAK8C,kBAApC;AACA,IAAA;AACA,IAAA,WAAKpB,OAAL,GAAe,IAAf;AACA,IAAA,aAAOgC,UAAUgC,IAAV,CAAerB,MAAf,EAAuBsB,IAAvB,CAA4B,YAAM;AACvC,IAAA,cAAKjE,OAAL,GAAe,KAAf;AACA,IAAA,cAAKD,QAAL,GAAgB,IAAhB;AACA,IAAA;AACA,IAAA,cAAKhB,QAAL,CAAc,MAAK0B,IAAnB,EAAyB,QAAzB,EAAmC,MAAKyD,YAAxC;AACA,IAAA;AACA,IAAA,YAAI,MAAKhE,MAAT,EAAiB;AAAE,IAAA,gBAAKA,MAAL,CAAYtD,OAAZ,CAAoB,QAApB;AAA+B,IAAA;AAClD,IAAA;AACArB,IAAAA,UAAE4I,KAAF,CAAQ,YAAM;AACZlG,IAAAA,YAAEiD,MAAF,EAAUkD,GAAV,CAAc,OAAd,EAAuB,MAAK/D,YAA5B;AACA,IAAA,gBAAKO,YAAL,CAAkBwD,GAAlB,CAAsB,QAAtB,EAAgC,MAAK/D,YAArC;AACD,IAAA,SAHD;AAID,IAAA,OAZM,CAAP;AAaD,IAAA,KAlCD,MAkCO;AACL,IAAA,aAAOgE,QAAQC,OAAR,EAAP;AACD,IAAA;AACF,IAAA,GAlJY;AAmJb/D,IAAAA,YAAU,oBAAY;AAAA,IAAA;;AACpB,IAAA,QAAK,CAAC,KAAKN,MAAN,IAAgB,KAAKF,QAAtB,IAAmC,KAAKC,OAA5C,EAAqD;AACnD,IAAA;AACA,IAAA,WAAKP,GAAL,CAAS8E,WAAT,CAAqB,MAArB;AACA,IAAA;AACAhJ,IAAAA,QAAE4I,KAAF,CAAQ;AAAA,IAAA,eAAM,OAAKJ,aAAL,CAAmB,OAAKtD,IAAxB,EAA8B,QAA9B,EAAwC,OAAKyD,YAA7C,CAAN;AAAA,IAAA,OAAR;AACA,IAAA;AACA,IAAA,WAAKjE,MAAL,GAAc,IAAd;AACA,IAAA,aAAO+B,UAAUwC,IAAV,CAAe,KAAK/D,IAAL,CAAUhB,GAAzB,EAA8BwE,IAA9B,CAAmC,YAAM;AAC9C,IAAA,eAAKhE,MAAL,GAAc,KAAd;AACA,IAAA,eAAKF,QAAL,GAAgB,KAAhB;AACA,IAAA;AACA,IAAA,eAAKN,GAAL,CAASiB,GAAT,CAAa,SAAb,EAAwB,EAAxB;AACA,IAAA;AACAzC,IAAAA,UAAEiD,MAAF,EAAUC,GAAV,CAAc,OAAd,EAAuB,OAAKd,YAA5B;AACA,IAAA;AACA,IAAA,eAAKO,YAAL,CAAkBO,GAAlB,CAAsB,QAAtB,EAAgC,OAAKC,kBAArC;AACA,IAAA,eAAKR,YAAL,CAAkBO,GAAlB,CAAsB,QAAtB,EAAgC,OAAKd,YAArC;AACA,IAAA;AACA,IAAA,eAAKzD,OAAL,CAAa,QAAb;AACA,IAAA;AACA,IAAA,YAAI,OAAKsD,MAAT,EAAiB;AAAE,IAAA,iBAAKA,MAAL,CAAYtD,OAAZ,CAAoB,MAApB;AAA6B,IAAA;AACjD,IAAA,OAdM,CAAP;AAeD,IAAA,KAtBD,MAsBO;AACL,IAAA,aAAOyH,QAAQC,OAAR,EAAP;AACD,IAAA;AACF,IAAA;AA7KY,IAAA,CAAf;;ICKA,IAAMG,wBAAwBC,wBAAc7J,MAAd,CAAqB;AACjDgC,IAAAA,cAAY,EAAC8H,OAAO,wBAAR;AADqC,IAAA,CAArB,CAA9B;;AAIA,uBAAe/I,WAAWI,UAAX,CAAsBnB,MAAtB,CAA6B;AAC1CK,IAAAA,UAAQ,CAAC0J,aAAD,CADkC;AAE1CxI,IAAAA,YAAUyB,UAAU,UAAV,CAFgC;AAG1C2D,IAAAA,iBAAeiD,qBAH2B;AAI1C/C,IAAAA,oBAAkB7F,QAJwB;AAK1CgB,IAAAA,cAAY;AACV8H,IAAAA,WAAO;AADG,IAAA,GAL8B;AAQ1CE,IAAAA,MAAI;AACFC,IAAAA,YAAQ,kBADN;AAEFxI,IAAAA,UAAM,cAFJ;AAGFyI,IAAAA,WAAO;AAHL,IAAA,GARsC;AAa1CxI,IAAAA,UAAQ;AACN,IAAA,wBAAoB,eADd;AAEN,IAAA,wBAAoB,eAFd;AAGN,IAAA,wBAAoB,eAHd;AAIN,IAAA,uBAAmB;AAJb,IAAA,GAbkC;AAmB1CoD,IAAAA,cAAY,oBAAUC,OAAV,EAAmB;AAC7B,IAAA,SAAKb,QAAL,CAAc,IAAd,EAAoB,eAApB,EAAqC,KAAKiG,cAA1C;AACAnD,IAAAA,UAAMvC,aAAN,CAAoB,IAApB,EAA0B,KAAKc,UAA/B;AACAyB,IAAAA,UAAMtC,cAAN,CAAqB,IAArB,EAA2B,IAA3B;AACD,IAAA,GAvByC;AAwB1CyF,IAAAA,kBAAgB,0BAAY;AAC1B,IAAA;AACA,IAAA,QAAI,KAAKC,QAAT,EAAmB;AACjB,IAAA,UAAIC,QAAQ,KAAKzE,IAAL,CAAU0E,WAAV,CAAsB,KAAKF,QAA3B,CAAZ;AACA,IAAA,UAAIC,KAAJ,EAAW;AAAEA,IAAAA,cAAMzF,GAAN,CAAUqE,QAAV,CAAmB,OAAnB;AAA6B,IAAA;AAC3C,IAAA;AACF,IAAA,GA9ByC;AA+B1CvC,IAAAA,YAAU,oBAAY;AACpB,IAAA,SAAKxC,QAAL,CAAc,KAAKqB,UAAnB,EAA+B,OAA/B,EAAwC,KAAKgF,cAA7C;AACA,IAAA,SAAKA,cAAL;AACD,IAAA,GAlCyC;AAmC1CC,IAAAA,iBAAe,yBAAY;AACzB,IAAA,QAAInG,QAAQ,KAAK2F,EAAL,CAAQE,KAAR,CAAcO,GAAd,EAAZ;AACA,IAAA,SAAKC,QAAL,CAAcrG,KAAd;AACD,IAAA,GAtCyC;AAuC1CsG,IAAAA,iBAAe,uBAAUzE,CAAV,EAAa;AAC1BA,IAAAA,MAAE0E,cAAF;AACA,IAAA,QAAI,CAAC,KAAK1F,QAAV,EAAoB;AAClBxE,IAAAA,QAAE4I,KAAF,CAAQ,KAAKzB,QAAL,CAAcpC,IAAd,CAAmB,IAAnB,CAAR;AACD,IAAA,KAFD,MAEO;AACL/E,IAAAA,QAAE4I,KAAF,CAAQ,KAAK5D,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAR;AACA,IAAA,WAAKuE,EAAL,CAAQC,MAAR,CAAeY,IAAf;AACD,IAAA;AACF,IAAA,GA/CyC;AAgD1CC,IAAAA,iBAAe,uBAAU5E,CAAV,EAAa;AAC1BA,IAAAA,MAAE6E,eAAF;AACA7E,IAAAA,MAAE0E,cAAF;AACA,IAAA,QAAI,CAAC,KAAK1F,QAAV,EAAoB;AAClBxE,IAAAA,QAAE4I,KAAF,CAAQ,KAAKzB,QAAL,CAAcpC,IAAd,CAAmB,IAAnB,CAAR;AACD,IAAA;AACF,IAAA,GAtDyC;AAuD1CuF,IAAAA,gBAAc,sBAAU9E,CAAV,EAAa;AACzB,IAAA,QAAI,KAAKhB,QAAT,EAAmB;AACjB,IAAA,UAAI+F,cAAc,KAAKrF,IAAL,CAAUsF,eAAV,EAAlB;AACA,IAAA,UAAID,gBAAgBpH,SAApB,EAA+B;AAC7B,IAAA,aAAK+B,IAAL,CAAU7D,OAAV,CAAkB,QAAlB,EAA4BkJ,WAA5B;AACD,IAAA;AACF,IAAA,KALD,MAKO;AACL,IAAA,WAAKvF,QAAL;AACD,IAAA;AACF,IAAA,GAhEyC;AAiE1C2D,IAAAA,gBAAc,sBAAUgB,KAAV,EAAiB;AAC7B,IAAA,SAAKc,MAAL,CAAYd,MAAMpI,KAAlB,EAAyB,IAAzB;AACA,IAAA,SAAKyD,QAAL;AACD,IAAA,GApEyC;AAqE1C4B,IAAAA,cAAY,sBAAY;AACtB,IAAA,WAAOlE,EAAE,MAAF,CAAP;AACD,IAAA,GAvEyC;AAwE1CgI,IAAAA,YAAU,oBAAY;AACpB,IAAA,QAAIhE,UAAU,KAAK7B,UAAL,CAAgB8F,MAAhB,CAAuB,UAAUzH,CAAV,EAAa;AAChD,IAAA,aAAO,EAAEA,EAAE0H,GAAF,CAAM,SAAN,MAAqB,KAAvB,CAAP;AACD,IAAA,KAFa,CAAd;AAGA,IAAA,WAAO5K,EAAE6K,KAAF,CAAQnE,OAAR,CAAP;AACD,IAAA,GA7EyC;AA8E1CoE,IAAAA,eAAa,uBAAY;AACvB,IAAA,WAAO,KAAKpB,QAAZ;AACD,IAAA,GAhFyC;AAiF1CG,IAAAA,kBAAgB,0BAAY;AAC1B,IAAA,QAAI,KAAKtF,UAAL,KAAoB,IAApB,IAA4B,KAAKM,UAAL,CAAgBkG,IAAhB,KAAyB,CAAzD,EAA4D;AAC1D,IAAA,WAAKC,QAAL,GAAgB,KAAhB;AACD,IAAA,KAFD,MAEO,IAAI,KAAKnG,UAAL,CAAgBkG,IAAhB,OAA2B,CAA/B,EAAkC;AACvC,IAAA,WAAKC,QAAL,GAAgB,IAAhB;AACD,IAAA;AACD,IAAA,QAAI,KAAKA,QAAT,EAAmB;AACjB,IAAA,WAAK9G,GAAL,CAASqE,QAAT,CAAkB,UAAlB;AACA,IAAA,WAAKe,EAAL,CAAQC,MAAR,CAAe0B,IAAf,CAAoB,UAApB,EAAgC,CAAC,CAAjC;AACA,IAAA,WAAKR,MAAL,CAAY,IAAZ,EAAkB,IAAlB;AACD,IAAA,KAJD,MAIO;AACL,IAAA,WAAKvG,GAAL,CAAS8E,WAAT,CAAqB,UAArB;AACA,IAAA,UAAI,KAAKM,EAAL,CAAQC,MAAR,CAAe0B,IAAnB,EAAyB,KAAK3B,EAAL,CAAQC,MAAR,CAAe0B,IAAf,CAAoB,UAApB,EAAgC,CAAhC;AACzB,IAAA,UAAI,KAAKC,UAAT,EAAqB;AACnB,IAAA,aAAKT,MAAL,CAAY,KAAK5F,UAAL,CAAgB+F,GAAhB,CAAoB,KAAKM,UAAzB,CAAZ,EAAkD,IAAlD;AACA,IAAA,aAAKA,UAAL,GAAkB,IAAlB;AACD,IAAA,OAHD,MAGO;AACL,IAAA,YAAI1J,KAAK,KAAK8H,EAAL,CAAQE,KAAR,CAAcO,GAAd,MAAwB,KAAKL,QAAL,IAAiB,KAAKA,QAAL,CAAclI,EAAhE;AACA,IAAA,aAAKiJ,MAAL,CAAY,KAAK5F,UAAL,CAAgB+F,GAAhB,CAAoBpJ,EAApB,KAA2B,KAAKkJ,QAAL,EAAvC,EAAwD,IAAxD;AACD,IAAA;AACF,IAAA;AACF,IAAA,GAtGyC;AAuG1CD,IAAAA,UAAQ,gBAAUlJ,KAAV,EAAiBF,OAAjB,EAA0B;AAChC,IAAA,QAAI8J,UAAU,EAAE,KAAKzB,QAAL,KAAkBnI,KAApB,CAAd;AACA,IAAA,SAAKmI,QAAL,GAAgBnI,KAAhB;AACA,IAAA,QAAI,KAAK6J,UAAT,EAAqB;AACnB,IAAA,UAAI,KAAK1B,QAAT,EAAmB;AACjB,IAAA,aAAKJ,EAAL,CAAQvI,IAAR,CAAasK,IAAb,CAAkB,KAAK3B,QAAL,CAAckB,GAAd,CAAkB,MAAlB,CAAlB;AACA,IAAA,aAAKtB,EAAL,CAAQE,KAAR,CAAcO,GAAd,CAAkB,KAAKL,QAAL,CAAclI,EAAhC;AACD,IAAA,OAHD,MAGO;AACL,IAAA,aAAK8H,EAAL,CAAQvI,IAAR,CAAasK,IAAb,CAAkB,KAAlB;AACA,IAAA,aAAK/B,EAAL,CAAQE,KAAR,CAAcO,GAAd,CAAkB,EAAlB;AACD,IAAA;AACD,IAAA,UAAI1I,OAAJ,EAAa;AAAE,IAAA,aAAKiI,EAAL,CAAQE,KAAR,CAAcnI,OAAd,CAAsB,QAAtB;AAAiC,IAAA;AACjD,IAAA;AACD,IAAA,QAAI8J,OAAJ,EAAa;AAAE,IAAA,WAAK9J,OAAL,CAAa,QAAb,EAAuB,KAAKqI,QAA5B;AAAuC,IAAA;AACvD,IAAA,GArHyC;AAsH1CM,IAAAA,YAAU,kBAAUxI,EAAV,EAAcH,OAAd,EAAuB;AAC/B,IAAA,QAAIG,OAAO2B,SAAP,IAAoB3B,OAAO,IAA3B,IAAmCxB,EAAE+K,IAAF,CAAOvJ,EAAP,MAAe,CAAtD,EAAyD;AACvD,IAAA,WAAKiJ,MAAL,CAAY,KAAKC,QAAL,EAAZ,EAA6BrJ,OAA7B;AACD,IAAA,KAFD,MAEO;AACL,IAAA,UAAIiK,OAAO,KAAKzG,UAAL,CAAgB+F,GAAhB,CAAoBpJ,EAApB,CAAX;AACA,IAAA,UAAI,CAAC8J,IAAL,EAAW;AACT,IAAA,aAAKJ,UAAL,GAAkB1J,EAAlB;AACD,IAAA,OAFD,MAEO;AACL,IAAA,aAAKiJ,MAAL,CAAY,KAAK5F,UAAL,CAAgB+F,GAAhB,CAAoBpJ,EAApB,CAAZ,EAAqCH,OAArC;AACD,IAAA;AACF,IAAA;AACF,IAAA,GAjIyC;AAkI1CkK,IAAAA,qBAAmB,2BAAU7E,OAAV,EAAmB;AACpC,IAAA;AACA,IAAA,SAAK7B,UAAL,CAAgB5E,IAAhB,CAAqB,UAAUsB,KAAV,EAAiB;AACpCA,IAAAA,YAAMiK,GAAN,CAAU,SAAV,EAAqBxL,EAAEyL,QAAF,CAAW/E,OAAX,EAAoBnF,MAAMC,EAA1B,CAArB,EAAoD,EAACkK,QAAQ,IAAT,EAApD;AACD,IAAA,KAFD;AAGA,IAAA;AACA,IAAA,SAAK7G,UAAL,CAAgBxD,OAAhB,CAAwB,QAAxB;AACA,IAAA;AACA,IAAA,QAAI,KAAKqI,QAAT,EAAmB;AACjB,IAAA,UAAI,KAAKA,QAAL,CAAckB,GAAd,CAAkB,SAAlB,MAAiC,KAArC,EAA4C;AAC1C,IAAA,aAAKH,MAAL,CAAY,KAAKC,QAAL,EAAZ;AACD,IAAA;AACF,IAAA;AACF,IAAA;AA/IyC,IAAA,CAA7B,CAAf;;gBCVe;AACbiB,IAAAA,4BADa;AAEbC,IAAAA,4BAFa;AAGbvC,IAAAA;AAHa,IAAA,CAAf;;;;"}